# 硬件连接说明

## 元件清单
- ESP32开发板
- DS18B20温度传感器
- 0.96寸OLED显示屏（SSD1306驱动，I2C接口，128x64分辨率）
- 4.7KΩ电阻（用于DS18B20）

## 引脚连接图

### OLED显示屏（SSD1306 0.96寸，I2C接口）
```
OLED引脚    ESP32引脚
--------    ---------
VCC         3.3V 或 5V
GND         GND
SCL         GPIO22 (I2C SCL)
SDA         GPIO21 (I2C SDA)
```

### DS18B20温度传感器
```
DS18B20引脚    ESP32引脚    备注
----------    ---------    ----
VCC           3.3V         红色
GND           GND          黑色
DATA          GPIO4        黄色（接4.7K上拉电阻到3.3V）
```

## 详细连接图

```
ESP32                    OLED (0.96" SSD1306)
-----                    --------------------
3V3/VIN  ─────────────>  VCC
GND      ─────────────>  GND
GPIO22   ─────────────>  SCL
GPIO21   ─────────────>  SDA

ESP32                    DS18B20
-----                    -------
3V3      ─────────────>  VCC (红色)
GND      ─────────────>  GND (黑色)
GPIO4    ────┬────────>  DATA (黄色)
              │
              ├──[4.7KΩ]───┐
              │           │
             3V3 <────────┘

说明：
- DS18B20的DATA引脚需要通过4.7KΩ电阻上拉到3.3V
- OLED使用I2C通信，地址通常为0x3C
```

## 连接示意图（ASCII图）

```
                    ESP32开发板
    ┌──────────────────────────────────┐
    │                                  │
    │  [3V3]─────────────┬─────────[VCC]─ OLED
    │                    │                │
    │  [GND]─────────────┼─────────[GND]─┘
    │                    │
    │  [GPIO22]──────────┼─────────[SCL]
    │                    │
    │  [GPIO21]──────────┼─────────[SDA]
    │                    │
    │  [GPIO4]───────────┼─────────[DATA]── DS18B20
    │                    │            │
    │                    └──[4.7KΩ]───┴── 3V3 (上拉)
    │                                  │
    └──────────────────────────────────┘
```

## 注意事项

1. **电源**
   - OLED可以用3.3V或5V供电
   - DS18B20建议使用3.3V供电

2. **I2C地址**
   - OLED默认I2C地址为0x3C
   - 如果显示不正常，尝试修改代码中的SCREEN_ADDRESS为0x3D

3. **DS18B20上拉电阻**
   - 必须使用4.7KΩ电阻将DATA引脚上拉到VCC
   - 如果没有上拉电阻，传感器将无法正常工作

4. **接线检查**
   - 上电前请仔细检查接线，确保没有短路
   - DS18B20的正负极不能接反，否则会损坏传感器

5. **WiFi配置**
   - 在main.cpp中修改ssid和password为您家的WiFi信息
   - 确保ESP32能连接到网络以获取时间

## 调试建议

1. 打开串口监视器（115200波特率）查看运行状态
2. 如果OLED不显示，检查：
   - I2C接线是否正确
   - OLED供电是否正常
   - 尝试更换I2C地址（0x3C或0x3D）
3. 如果温度显示-127°C或85°C：
   - 检查DS18B20接线
   - 确认上拉电阻已连接
   - 检查传感器是否损坏

## 默认引脚配置

代码中的引脚定义如下（如有需要可修改）：

```cpp
#define ONE_WIRE_BUS 4        // DS18B20数据引脚
#define SCREEN_ADDRESS 0x3C    // OLED I2C地址
```

ESP32的I2C默认引脚为：
- SCL: GPIO22
- SDA: GPIO21
